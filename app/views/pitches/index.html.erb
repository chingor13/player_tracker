<% content_for(:subnav) do %>
  <h2>Facets</h2>

  <%= render partial: "facet", locals: {name: "Pitcher", type: "pitcher", data: @pitches, formatter: Proc.new{|id| player_name(id)}} %>
  <%= render partial: "facet", locals: {name: "Batter", type: "batter", data: @pitches, formatter: Proc.new{|id| player_name(id)}} %>
  <%= render partial: "facet", locals: {name: "Pitch type", type: "pitch_type", data: @pitches, formatter: Proc.new{|type| pitch_type_name(type)}} %>
  <%= render partial: "facet", locals: {name: "Outcome", type: "result", data: @pitches, formatter: Proc.new{|type| pitch_outcome_name(type)}} %>
  <%= render partial: "facet", locals: {name: "Game", type: "game_id", data: @pitches} %>
  <%= render partial: "facet", locals: {name: "Nasty", type: "nasty", data: @pitches} %>
<% end %>

<h1>Pitches</h1>

<%= render partial: "filters", locals: {filters: @filters} %>

<table class="table table-striped table-bordered">
  <tr>
    <th>Pitcher</th>
    <th>Batter</th>
    <th>Pitch Type</th>
    <th>Start Speed</th>
    <th>Result</th>
    <th>Nasty</th>
  </tr>
  <%= render partial: "pitch", collection: @pitches %>
</table>

<%= will_paginate @pitches %>