<% content_for(:subnav) do %>
  <h2>Facets</h2>

  <%= render partial: "facet", locals: {name: "Pitcher", type: "pitcher", data: @pitches, formatter: Proc.new{|id| player_name(id)}} %>
  <%= render partial: "facet", locals: {name: "Batter", type: "batter", data: @pitches, formatter: Proc.new{|id| player_name(id)}} %>
  <%= render partial: "facet", locals: {name: "Pitch type", type: "pitch_type", data: @pitches, formatter: Proc.new{|type| pitch_type_name(type)}} %>
  <%= render partial: "facet", locals: {name: "Outcome", type: "result", data: @pitches, formatter: Proc.new{|type| pitch_outcome_name(type)}} %>
  <%= render partial: "facet", locals: {name: "Game", type: "game_id", data: @pitches} %>
<% end %>

<h1>Pitches for Game</h1>

<%= render partial: "filters", locals: {filters: @filters} %>

<table class="table table-striped table-bordered">
  <tr>
    <th>Pitcher</th>
    <th>Batter</th>
    <th>Pitch Type</th>
    <th>Start Speed</th>
    <th>Result</th>
  </tr>
  <% @pitches.each do |pitch| %>
    <tr>
      <td><%= player_name(pitch.pitcher) %></td>
      <td><%= player_name(pitch.batter) %></td>
      <td><%= pitch_type_name(pitch.pitch_type) %></td>
      <td><%= pitch.start_speed %></td>
      <td><%= pitch.result %></td>
    </tr>
  <% end %>
</table>

<%= will_paginate @pitches %>